---
title: "웹 프로그래밍이란? (웹, http 프로토콜, IPv4, IPv6)"
date: 2020-08-26 18:00
tags:
- Web
- HTTP
description: 웹 서버와 WAS의 차이, 웹 서버의 역할, 확장 CGI
---

## 웹 프로그래밍이란?

- 애플리케이션 개발 순서: 설계 -> 개발 -> 테스트 -> 배포(포장해서 사용자들에게 나눠주는 것)
- 요리 주문(요구사항 분석) -> 재료 준비 (db의 raw data) -> 레시피(로직)대로 가공해 information으로 만듦 -> 요리를 내보냄
**웹프로그래밍: 클라이언트 사이드 모듈 / 서버 사이드 모듈 두개가 한 공간에서 유기적으로 돌아가게 하는 것**

Application(context): 명령어의 집합. 
e.g. was는 자기 컨텍스트에서 그 요청에 답할수있는 컨텍스트를 찾음. 클라이언트가 응답 받아서 브라우저로 렌더링함

## 일괄 처리가 필요한 상황

![일괄 처리가 필요한 상황](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FRCHAs%2FbtqHgqcVOWW%2FmpA3cQVhK7kgDIpwpiVxuk%2Fimg.png)

처음 세개는 real time(실시간 처리)하고 배치 프로그램은 일괄처리다.

**일괄 처리 예시**: 네이버에서 탈퇴할 때 나의 회원정보가 탈퇴 일주일 후에 삭제되는 것.

하지만 일괄처리/ 실시간 처리 애들이 서로 영향을 주면 안됨. 절대로 별개여야함  
=> 멀티 쓰레드를 쓴다.

또 중요한 것. 일괄 처리할 때 만약 일주일이면 그 시간을 재야함. time check를 해줄 수 있는 것 필요
=> 스케줄러

## WEB: 논리적인 의미의 공간

인터넷(International Network): 웹을 실제로 구현한 게 인터넷/ 클라이언트의 요청과 서버의 응답이 오고가는 매체  
네트워크: 정보를 주고받기위한 물리적 매체/ data server and client  

## HTTP protocol

- 클라이언트가 요청하고 서버가 응답할 때 웹이 구현된 기술 방식을 사용해야함 ==> http protocol 사용 (하이퍼텍스트를 전송하기위한 프로토콜) / -> 즉, HTML(HyperText Markup Language)을 사용한다.
- HTML은 클라이언트, 서버의 공통 언어체계이기도 하다.
- 광케이블로 주고받을수있는건 0 1 집합 뿐임 (data stream) => 전송규칙 (protocol 필요) 그 프로토콜 중 html 전송 제일 잘하는게 http

IP: 정보 요청이나 응답 전송하려면 클라, 서버 서로 식별해야함. 네트워크의 peer들을 어케 식별할 때 사용하는 주소

![ipconfig](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FmN4SH%2FbtqG9A8wo6V%2F5uuCBMm4kkK1SdOxXUwk7K%2Fimg.png)

## IPv4, IPv6 비교

- IPv4: 최대값 255씩 4섹터 -> 2의8승(8비트 ) * 4 = 32bit/ 2의 32제곱..  
- Ipv6: 영어f까지만있음 16진수 = 16진수는 4비트 필요..... -> 16* 8세트 = 128비트

근데 누가 네이버 ip 주소 외우고 다니냐 -> 걍 domain name 씀
네이버라는 하나의 peer 식별하는 법: ip(for 기계) or Domain ( for 인간)

## 웹의 client란?

클라이언트 -> 한국의 모든 도메인네임은 KISA에서 관리. 도메인 네임 서버 (DNS) 에서 특정 도메인에 매핑되어있는 사이트 찾음
NIC(network information centre) 나라마다 있음. 우리나라로는 KISA로 이름이바뀜 -> ICANN에서 관리(미국). 미국은 이런 정보를 관리하기 때문에 최강대국이다. + 우리나라에서 북한 사이트 못 들어감 - 그런 정보를 읽고 막는 게 미국임

## HTML과 JavaScript 비교

html: 정적static (시계 구현 불가능)  
자바스크립트: 동적  

BUT 자바스크립트 단점: 브라우저에서만 돌아간다. (due to 브라우저 엔진) 즉, 클라이언트가 실행한다) => 서버 사이드의 데이터를 가져올 수 없다.(=사용할수있는 데이터가 클라이언트 사이드로 한정되어있다.) -> 서버사이드 애플리케이션 needed

## WS vs. WAS

- 웹서버(W.S)는 정적static인 요청 (파일이 미리만들어져있음)을 처리한다
- 웹 어플리케이션 서버(W.A.S)는 동적인 요청을 처리한다

3 tier 구조: client -> web server-> db
4티어: 서버에서 정적.동적인 요청에 대한 책임 이 분리되어있는 구조.

## 웹서버의 역할

### 1. 대기

서버는 요청을 받으려면 24시간 대기 (리스닝)상태여야함.  
IP는 pc구별을 위한 것이고, 한 PC 안에서 서비스 구분은 Port 넘버로 한다. (오라클 SQL의 경우: 1521)
기본 웹은 80번임.. 웹 서버가 80번 포트를 계속 감시한다
애플리케이션 대신에 웹서버가 대기를 하고 있다가 요청을 감지한다.

### 2. 요구사항 분석 및 연결

요청이 들어오면 요청 분석(요구사항 분석)해 클라이언트가 뭘 요구하고 있는지 알아야함 - 어플리케이션이 함
만약 짜장면 요청이면 짜장면을 만드는 모듈로 연결해줌

### 3. 실행

: 코딩, 컴파일,실행할 수 있는것 모음은 jdk에 담겨있다. 자바 SE는 기업용이 아니라 servlet api를 가지고 있지 않기 때문에 apache tomcat으로부터 api를 빌려서 실행  
CGI: 클라이언트 요청에 따라 하나의 요청당 하나의 동적인 웹 페이지를 생성함.  

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbNzqkt%2FbtqHjrvGsIl%2FszkOSSF10gv1zlvbcRBEH1%2Fimg.png)

## WAS

:Server, WAS(Web Application Server) app = context.

- was가 제공하는건 앱이자 컨텍스트, Container(=web container/ servlet container)
  - 컨테이너란? 내부 컴포넌트의 life cycle을 관리하는 관리자  
       ( e.g. javaFX- 에서 뭐 만들려면 버튼->페인->...페인 죽으면 버튼도 죽는다)  
- 이 라이프사이클 내에서 컨테이너인 톰캣이 무슨 역할을 하는가?

### lifecycle callback

- lifecycle 내에서 각 시점별로 호출할수있는 callback 메서드가 서블릿 스펙에 정의되어있다.
- 1) 초기화: 아무런 설정(load-on-startup)이 없는 한, 해당 서블릿에 대한 최초의 요청이 발생하면 초기화 진행(톰캣이 서블릿객체를 생성.)
- 2) 소멸: 아무런 설정이 없는 한, 서버는 서블릿을 싱글톤의 형태로 관리

=> 즉, 기본 설정에서는 서블릿에 요청이 발생해야 객체가 만들어지고 그 객체는 1개(싱글톤)다.

### request callback

- service: 모든 request method에 공통적으로 적용될 코드를 정의
- doXXX: 특정 request method에 대해서만 적용할 코드를 정의

#### CGI

- 트래픽이 심함 (네이버의 경우 이렇게 하면 동시에 프로그램이 십만개 돌아갈 수도 있음)
- 해결책: 병행 처리... 쓰레드...

### 확장 CGI

한 프로세스가 점유하는 자원의 크기와 쓰레드의 자원의 크기 - 아주 다름.
한 쓰레드가 점유하는 자원의 크기가 훨 작다 -> 프로세스에서 쓰레드로 변환되면 더 효율적인 멀티태스킹 가능.
--> 멀티 쓰레드로 함 : 확장 CGI

**멀티쓰레드 처리할때 프로세스는 하나 돌아감**

## Web App

페이스북, 디스코드, 인스타그램, 트위터의 공통점: 라이브러리를 써서 웹 어플리케이션으로서 동작한다.

### 왜 웹 어플리케이션인가?

- 동작이 마치 애플리케이션 같고
- 사용자 측면에서도 앱처럼 동작하기때문
- pwa (프로그래시브 웹앱)이 있는데 얘는 앱설치하듯 해서 빠르게 사용가능.

이전의 웹사이트는 **MVC패턴**으로 많이 만들어졌다.

- Model: 사용되는 데이터와 데이터를 처리하는 모델. 웹에서 사용하는 모든 종류의 데이터
- View: UI
양방향 데이터 바인딩 = 모델에서 값이 바뀌면 뷰에서도 바뀐다. -> 모델과 뷰의 의존성 => 복잡한 서비스=> 컨트롤 힘들어짐
- Controller: 사용자의 행동(이벤트)를 처리하는 컨트롤러

## What if?

상호작용하는 데이터가 많아지면 어떡할까?

### React

**리액트의 가상 돔!**  
Virtual DOM: 데이터가 바뀔때마다 화면 렌더링(reflow, repaint)를 다시 하지 않고 가상 돔에서 모든 변화를 적용한 뒤, 한번에 실제 돔에 반영한다.

### SPA

리액트, Vue.js 등 SPA(Single Page Application)가 늘고 있다.  
SPA란 웹 앱에 필요한 모든 정적 리소스를 최초 한번에 다운로드받고, 이후 새로운 페이지 요청시 페이지 갱신에 필요한 데이터만을 전달받아 페이지를 갱신하는 것이다.

#### SPA의 장점

1. 깜빡임이 없고, 유저가 보기에 자연스럽다.
2. 페이지 이동 시 변화가 있는 부분만 갱신하므로 전체적으로 트래픽이 감서함 + 렌더링이 좀 더 효율적임

#### SPA의 단점

1. 초기에 많은 리소스들을 받아와야하므로 초기 구동 속도가 느림
2. SEO가 어려움 (검색엔진이 사이트 크롤링 시 JS를 실행하지 않고 빈 상태의 코드를 크롤링하기 떄문에 인덱싱이 제대로 되지 않음.)
